<div class="dropdown-options-container" [ngClass]="[variant, isFullscreenSelection ? 'fullscreen-mode' : '']">
  <!-- Fullscreen header with close button -->
  <div *ngIf="isFullscreenSelection" class="fullscreen-header">
    <div class="fullscreen-title typo-title-3">Select an option</div>
    <button class="close-button" (click)="closeFullscreen()">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg>
    </button>
  </div>

  <!-- Search input -->
  <div *ngIf="isSearchable" class="search-container">
    <div class="search-input-wrapper">
      <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="11" cy="11" r="8"></circle>
        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
      </svg>
      <input
        type="text"
        class="search-input"
        [formControl]="searchControl"
        placeholder="Search..."
        [ngClass]="getTypographyClass()"
        autocomplete="off"
      />
    </div>
  </div>

  <div class="options-list">
    <div
      *ngFor="let option of filteredOptions"
      class="dropdown-option"
      [class.disabled]="option.disabled"
      [class.selected]="isSelected(option)"
      [class.ellipsis]="optionsEllipsis"
      [class.variant-primary]="variant === 'primary'"
      [class.variant-secondary]="variant === 'secondary'"
      [class.variant-tertiary]="variant === 'tertiary'"
      [ngClass]="getTypographyClass()"
      (click)="option.disabled ? null : selectOption(option)">

      <!-- Use custom template when provided -->
      <ng-container *ngIf="customTemplate; else defaultTemplate">
        <ng-container *ngTemplateOutlet="customTemplate; context: { $implicit: option }"></ng-container>
      </ng-container>

      <!-- Default template -->
      <ng-template #defaultTemplate>
        {{ option.label }}
      </ng-template>
    </div>

    <!-- No results message -->
    <div *ngIf="filteredOptions.length === 0" class="no-results" [ngClass]="getTypographyClass()">
      No matching options found
    </div>
  </div>
</div>
